# 前言

在前面我们科普了关于app卡顿系统ANR原理的一些知识，其实都是先了解原理然后在落地实现方案。

[app卡顿系列一 ：Handler同步屏障](https://juejin.cn/post/7028215325627793439)

[app卡顿系列二 ：屏幕刷新机制学习](https://juejin.cn/post/7028580465388814349)

[app卡顿系列三 ：ANR原理](https://juejin.cn/post/7029332222540775437)

总结anr的监控流程如下：

![image-20211117175552387](系统ANR监控.png)

从系统监控到anr到dumpTrace日志，有比较长的时间，所以系统抓取到的trace日志可能是正确的也有可能不正确。为了更好的分析anr发生时app的运行状况，需要对系统的anr采集消息进行不足。而这个就是头条所说的Raster方案。

# 方案落地：

在 [今日头条 ANR 优化实践系列 - 监控工具与分析思路](https://juejin.cn/post/6942665216781975582)中，raster主要是对主线程的调度过程进行监控。

1. 监控每一次消息分发处理的耗时情况
2. 监控主线程的调度能力
